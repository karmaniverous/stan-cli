### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

#### [0.11.0](https://github.com/karmaniverous/stan-cli/compare/0.10.3...0.11.0)

- feat(cli): record facet overlay requirements and dev plan [`2b936d3`](https://github.com/karmaniverous/stan-cli/commit/2b936d311162c2cef5d17a2107e648fbb6389196)
- feat(run): facet overlay scaffolding — flags, readers, anchors plumbing [`76f23dc`](https://github.com/karmaniverous/stan-cli/commit/76f23dc101b0be1e90a2486491478ef6cb5bcd78)
- updated stan-core [`b0d7844`](https://github.com/karmaniverous/stan-cli/commit/b0d7844d262d6dfa6a5fbb6abb615b8cdd57bad3)
- feat(interp/core): propose minimal facet overlay (exclude+anchor) and CLI-owned semantics [`4620c28`](https://github.com/karmaniverous/stan-cli/commit/4620c280951833fb35b5b280d5973a2fb5986b87)
- feat(cli): rename facet flags (-f/--facets, -F/--no-facets) and align semantics/docs [`9135c4d`](https://github.com/karmaniverous/stan-cli/commit/9135c4d99989bf6b98fd186d1a22febb32d5c6da)
- chore(interp/core): ACK facet overlay; accept anchors hook and outline next steps [`a1bbb8a`](https://github.com/karmaniverous/stan-cli/commit/a1bbb8a14a33929a77f3b6fa0d66a1a8468cd4bb)
- test(docs): add facet overlay unit tests [`81a1649`](https://github.com/karmaniverous/stan-cli/commit/81a1649b06b9304ff77ed057d7af9213cd8596f0)
- chore: add stan-core interop note for facet‑aware editing guard; update plan [`e94b61f`](https://github.com/karmaniverous/stan-cli/commit/e94b61fd7035d64c4647b9090bbadcf4adc94ef0)
- updated todo [`28b90ea`](https://github.com/karmaniverous/stan-cli/commit/28b90ead8cc05ef17c3544653b77690e144205df)
- feat: add high-impact facets (tests, live-ui) to shrink archives [`a9dc003`](https://github.com/karmaniverous/stan-cli/commit/a9dc0033415cc8a6fa55798343ef61d5dadfad94)
- test: add integration asserting anchors never override reserved denials [`9a2c297`](https://github.com/karmaniverous/stan-cli/commit/9a2c297523ce4c4509b82396fc97dfa1d9179e1c)
- read interop [`6f01492`](https://github.com/karmaniverous/stan-cli/commit/6f014921298c55700119d8ccb692cac977d490e6)
- feat: env‑gate legacy config acceptance (Phase‑2); require STAN_ACCEPT_LEGACY [`5e5331c`](https://github.com/karmaniverous/stan-cli/commit/5e5331ca7994e235e4dc25ea4f270968d0a12eae)
- feat(init): add system state/meta files to .gitignore and test [`f5e479c`](https://github.com/karmaniverous/stan-cli/commit/f5e479c5e4763f07deca01a7bcbb59002e37d3b8)
- updated gitignores [`3a32909`](https://github.com/karmaniverous/stan-cli/commit/3a3290995dbe3af3412744854b388c8736a42a57)
- feat: add patch/snap/init facets to further shrink archives [`4eb478c`](https://github.com/karmaniverous/stan-cli/commit/4eb478cac703aa6185440db8bcfa2e43a40c0ee7)
- docs(todo): update overlay status, enumerate remaining tasks, mark migration criteria done [`05b075c`](https://github.com/karmaniverous/stan-cli/commit/05b075c1475f45b48c08b9b2d16834944fe35310)
- feat: add initial facet overlays (ci/vscode/docs) [`d20c737`](https://github.com/karmaniverous/stan-cli/commit/d20c7373ba1ba22a1b7880e5cece4f72c120f03b)
- updated stan-core [`fd503a7`](https://github.com/karmaniverous/stan-cli/commit/fd503a71e36210bf8483e21d3d1312300ceb3137)
- test: scope reserved‑denials integration to diff/patch; note .git follow‑up [`95b5983`](https://github.com/karmaniverous/stan-cli/commit/95b5983aa5b4c7efb8ac8b8c05fea9b067457723)
- feat: enable tests facet; schedule reserved‑denials test next turn [`9d765bd`](https://github.com/karmaniverous/stan-cli/commit/9d765bd13a49c2e206cdf03a6b105e321583758a)
- test: set STAN_ACCEPT_LEGACY at module load in setup to fix legacy‑config suites [`4d6f35a`](https://github.com/karmaniverous/stan-cli/commit/4d6f35aaf71309d57c04bbf342e2d58a91963789)
- updated stan [`08d664f`](https://github.com/karmaniverous/stan-cli/commit/08d664f53347bf98567d6becde2dbce6e56f2c18)
- feat: add high-impact facets (tests, live-ui) to shrink archives [`90c8d73`](https://github.com/karmaniverous/stan-cli/commit/90c8d73190bebedaffacaa6f08cd916a300100ed)

#### [0.10.3](https://github.com/karmaniverous/stan-cli/compare/0.10.2...0.10.3)

> 16 October 2025

- test: consolidate cancellation suites and remove per-suite tar mocks [`4767be8`](https://github.com/karmaniverous/stan-cli/commit/4767be84d8a3017ad02031d75cc52e3ced83c1e7)
- refactor: DRY prompt-aware archiving in session (diff/full helpers) [`895e607`](https://github.com/karmaniverous/stan-cli/commit/895e60702c07ca0955aa0811c0b7eedbd46d12e5)
- repo reorganization [`d98d037`](https://github.com/karmaniverous/stan-cli/commit/d98d03779d409508a34d5f1957bb4e67cf3b0b01)
- refactor(archive): unify ephemeral archive wiring via archivePhase toggles [`22c4660`](https://github.com/karmaniverous/stan-cli/commit/22c4660944d6c1cdc6e718db4a94ea817659fbef)
- refactor(cli,runner): add archive/snap barrels and shared config parser [`0c252b8`](https://github.com/karmaniverous/stan-cli/commit/0c252b87bce072dfac01924c6d87df0139cc716a)
- refactor(ui,snap): extract lifecycle helpers; add selection util [`e36a718`](https://github.com/karmaniverous/stan-cli/commit/e36a718add8322324ac28189d24ce91585763678)
- fix(archive,cli): resolve archive barrel shadowing; remove unused options [`32ad7da`](https://github.com/karmaniverous/stan-cli/commit/32ad7da27131036a61219d1756bfe28f243afaf6)
- refactor(dry): factor archive-stage config/progress helpers [`bbeec8f`](https://github.com/karmaniverous/stan-cli/commit/bbeec8f036ab4b92872645e7ee913ebebfc77345)
- chore: release v0.10.3 [`81d6bfa`](https://github.com/karmaniverous/stan-cli/commit/81d6bfad151e6777a3a7ecc079d36c2bfb8c0ea4)
- refactor(ui): centralize row→presentation mapping for live/logger [`183971f`](https://github.com/karmaniverous/stan-cli/commit/183971f3195eb95301e4b962cafb6b003db8e932)
- updated dev plan [`3157760`](https://github.com/karmaniverous/stan-cli/commit/31577602a515d6970decd6821ecdaaa8476d1b86)
- refactor(dry): remove duplicates, unify archive call, and centralize helpers [`8815e87`](https://github.com/karmaniverous/stan-cli/commit/8815e87235010faff5225a936d1b4be2e48dee97)
- refactor(ui): add shared end-forwarders for LiveUI/LoggerUI [`f789c0e`](https://github.com/karmaniverous/stan-cli/commit/f789c0e2d5acf78be7b83b90d89c90b8eaae6b4c)
- fix(test): import rm to resolve PATH augmentation test [`e21b9c0`](https://github.com/karmaniverous/stan-cli/commit/e21b9c075f9e15645decdb45014cdca60184b2e0)
- refactor(cli): centralize early config legacy notice; use shared helpers [`40f7d4a`](https://github.com/karmaniverous/stan-cli/commit/40f7d4a48c013bbf115e4a5d28e056d649cb0008)
- refactor(progress): add BaseSink and adopt in LiveSink/LoggerSink [`b3c60b1`](https://github.com/karmaniverous/stan-cli/commit/b3c60b1fe252cd410e1a3e1c4c42e3d484aae5fd)
- fix(snap): scope error vars in history; remove unused helper and duplicate test [`bd56049`](https://github.com/karmaniverous/stan-cli/commit/bd560493195b1233f53b56a3b84ab0cb56ded297)
- runner: add secondary late-cancel settle before archive [`219f491`](https://github.com/karmaniverous/stan-cli/commit/219f4918bd6f2bd9798303e798a418df3363ec16)
- test: DRY phase 1 — rmDirWithRetries + barrel imports in tests [`2de27eb`](https://github.com/karmaniverous/stan-cli/commit/2de27eb5041ed82c3e9b773d060e345aa8a44f87)
- chore: fix lint by removing unused legacyWarned in run.action [`3781c67`](https://github.com/karmaniverous/stan-cli/commit/3781c67e1c02ccf005ac4caac2d6b05c2d7a87ec)
- refactor(cli): centralize legacy engine detection debug notice [`ac7e0e4`](https://github.com/karmaniverous/stan-cli/commit/ac7e0e4bad51254f982458773fe8dcbd4c0512a3)
- refactor: centralize debug scope labels and adopt across CLI/runner [`53f1437`](https://github.com/karmaniverous/stan-cli/commit/53f1437770e3f654b212daacc340cd3c252d1eee)
- chore: clean tsdoc warnings and sync plan [`79c4d03`](https://github.com/karmaniverous/stan-cli/commit/79c4d03ad6dba5c0bc2f7302f283cbc7e9a8a706)
- build: fail on project circular dependencies (CI guard) [`3c116f7`](https://github.com/karmaniverous/stan-cli/commit/3c116f78efa0d032fc931dee884eb18bbb1fe0d6)
- chore: add progress barrel and switch UI imports; confirm single-entry archive wiring [`05a7760`](https://github.com/karmaniverous/stan-cli/commit/05a776099874e4ee110c72fe861f2b97d753590f)
- fix(run): harden sequential pre-spawn cancel gate (CI/POSIX-aware) [`315697e`](https://github.com/karmaniverous/stan-cli/commit/315697e9b6243dcab1bc5182a31e7d4e3328f797)
- chore(todo): track archive wiring, barrels, and cancel test consolidation [`a42bce5`](https://github.com/karmaniverous/stan-cli/commit/a42bce593def9305bb94679a8f9ec73894c95cff)
- chore(debug): log stanPath fallback; plan tidy [`f9473ec`](https://github.com/karmaniverous/stan-cli/commit/f9473ecd11c806af52fd6c70e71026b26c47760d)
- docs(plan): add barrel/cycle guidance; prune duplicate debug-labels task [`16a89de`](https://github.com/karmaniverous/stan-cli/commit/16a89de99334c622470fdeb3439fcf926cee5723)
- refactor: broaden barrel adoption (session/live/progress) [`1bcf2c4`](https://github.com/karmaniverous/stan-cli/commit/1bcf2c4659fab0e03c936a9ff1df669332df3bc6)
- chore(test): centralize helpers under src/test-support and update imports [`e7dcce6`](https://github.com/karmaniverous/stan-cli/commit/e7dcce6c01150176b30d8f0e8b706187c92d8e7e)
- docs(todo): remove duplicate CI speed item from Next up [`e9a390f`](https://github.com/karmaniverous/stan-cli/commit/e9a390f77c0ad430f013a7db80333552105f5b3d)
- chore: barrel sweep — export stageImports and fix deep import [`234f1c0`](https://github.com/karmaniverous/stan-cli/commit/234f1c0066500724771d7fe1c160346225abfeb8)
- refactor: add archivePrintable helper and use in Logger sink [`2fd1d60`](https://github.com/karmaniverous/stan-cli/commit/2fd1d60ff6a39992353230e6226b093942b24c96)
- refactor: adopt barrels and extend session exports (phase 1) [`5f6f226`](https://github.com/karmaniverous/stan-cli/commit/5f6f22611f3f6c5215063283de410f25f028e159)
- chore: remove preflight module, add live barrel, and update tests [`079b60c`](https://github.com/karmaniverous/stan-cli/commit/079b60c8977a61164f28dd95df78a81b3575ed94)
- refactor(cli): DRY plan default via runDefaults; adopt in run action [`756f770`](https://github.com/karmaniverous/stan-cli/commit/756f770dbb086d15ba04cc9a90e0df7cccfd2fd6)
- run: finalize cancellation stabilization (CI-only POSIX settle tweak) [`332c07b`](https://github.com/karmaniverous/stan-cli/commit/332c07b46c9d1f7a6fea8e79f975186c83b2590c)
- test: fix live keypress cancellation in matrix by setting stdin TTY [`bbcc752`](https://github.com/karmaniverous/stan-cli/commit/bbcc7528cc4b4e87eb5c9cfb8ee954d082aaa6e5)
- chore(plan): persist unpersisted tasks [`366a77f`](https://github.com/karmaniverous/stan-cli/commit/366a77fb8f4e24fd6852f0ca64bcf3b9c3ff90a4)
- chore: add prompt barrel and normalize tests [`e20d422`](https://github.com/karmaniverous/stan-cli/commit/e20d42225badc0dcf9ef3508cf77a85f80f5ec5f)
- chore: add presentation barrel and switch presentRow imports; archive wiring confirmed [`cd808c1`](https://github.com/karmaniverous/stan-cli/commit/cd808c1fd9f23d97640655a0bba7e6d07f51e79a)
- fix: break session/archive-stage circular dependency [`9a981cf`](https://github.com/karmaniverous/stan-cli/commit/9a981cf27cce940eebbd43b5958c277d945860ec)
- docs(todo): record Windows stabilization of cancellation matrix [`e59f40d`](https://github.com/karmaniverous/stan-cli/commit/e59f40dcd4f329d153153f3e19831760af2fe411)
- chore(knip): remove duplicate default export from readSelection [`5f39c13`](https://github.com/karmaniverous/stan-cli/commit/5f39c13cd44f0e748e2ec3da34869a2763c68588)
- chore(test): use snap barrel in selection-sync.test.ts [`2715bec`](https://github.com/karmaniverous/stan-cli/commit/2715becb7565245d96a272e23ea76a8473086d03)
- fix(session): resolve TS2322 by aligning invoke-archive with archivePhase [`156e959`](https://github.com/karmaniverous/stan-cli/commit/156e95922f60a099d6803ae6941c0375e2ac1d4f)

#### [0.10.2](https://github.com/karmaniverous/stan-cli/compare/0.10.1...0.10.2)

> 15 October 2025

- updated stan [`c8a3c49`](https://github.com/karmaniverous/stan-cli/commit/c8a3c49861d103eafe9d2d4fd3cdade47c065c77)
- chore: robust core prompt resolver + CLI fallback [`3d29166`](https://github.com/karmaniverous/stan-cli/commit/3d29166bbfc1e4df89e52033f16d745c3073fc98)
- chore: release v0.10.2 [`ed2da23`](https://github.com/karmaniverous/stan-cli/commit/ed2da23ce45c3c03f9ca300a67133aa96f8423c2)
- run: resolve prompt at plan; honor --prompt; add STAN_DEBUG trace [`48bc95a`](https://github.com/karmaniverous/stan-cli/commit/48bc95a7ef2b92814a35d12b1aeea2a0ff23f48f)

#### [0.10.1](https://github.com/karmaniverous/stan-cli/compare/0.10.0...0.10.1)

> 14 October 2025

- ingest interop note [`1c3fea7`](https://github.com/karmaniverous/stan-cli/commit/1c3fea790359f494077b8df43f6c419ee9ce4fa9)
- chore: ack core interop; plan prompt-resolution helper + tests [`0b565ff`](https://github.com/karmaniverous/stan-cli/commit/0b565ff04a2f2cbe68673dda6ce467728d6d83c6)
- chore(todo): prune Completed (recent) to last items [`6846fa7`](https://github.com/karmaniverous/stan-cli/commit/6846fa7e1f37f7c2a202ba0173703d73c6c69325)
- chore: release v0.10.1 [`3b38ace`](https://github.com/karmaniverous/stan-cli/commit/3b38ace36420a134c0acfd39de20d45b7b34f3cd)
- test(resolve): avoid package.json exports in fallback assertion [`7f70946`](https://github.com/karmaniverous/stan-cli/commit/7f70946274968f2a5d2966eeaa28b9777b76241d)
- test(resolve): accept installed core dist path in fallback assertion [`a92de6e`](https://github.com/karmaniverous/stan-cli/commit/a92de6ee9f79e0e4b8cb99909953c55a37d154c5)
- fix(test): satisfy NodeJS.RequireResolve in fallback test [`2d67341`](https://github.com/karmaniverous/stan-cli/commit/2d673417225ae40b91b7255cd5db9e5c9e361632)

#### [0.10.0](https://github.com/karmaniverous/stan-cli/compare/0.9.0...0.10.0)

> 14 October 2025

- fix(init): ask to preserve scripts during legacy upgrade; skip selection when preserved [`c36ad31`](https://github.com/karmaniverous/stan-cli/commit/c36ad31422e9100bc3379ababede6b6598b141bc)
- plan: audit silent fallbacks (debug logs) and fix default stanPath fallback [`6779f3e`](https://github.com/karmaniverous/stan-cli/commit/6779f3e31d04e741d5ac70a81298625182779aa6)
- refactor(exec,session): decompose long modules into focused units [`55c6b2e`](https://github.com/karmaniverous/stan-cli/commit/55c6b2e5186823a37cd3114a713ba471407d3f71)
- refactor(session): decompose long session orchestrator into directory+index modules [`b19348d`](https://github.com/karmaniverous/stan-cli/commit/b19348d2a04c0502eeea801b10074cf2c9263dca)
- feat(run): add system prompt selection (-m/--prompt), materialize for full+diff with restore; remove run/snap drift prints [`1db870b`](https://github.com/karmaniverous/stan-cli/commit/1db870b5f923abc17dd99fc34cb2aba1044df0c9)
- feat(run): add -m/--prompt source selection; remove drift prints from run/snap; include prompt in plan and diff [`13dc5ee`](https://github.com/karmaniverous/stan-cli/commit/13dc5ee18c07e1a882bef88c633a4124d8da4435)
- refactor(init): split service index into helpers and resolvers (no new subdir) [`aa6b648`](https://github.com/karmaniverous/stan-cli/commit/aa6b648b5662f6ba5aea3a46649baca298824cbe)
- feat(config): add namespaced ingestion contract; plan init migration and legacy engine fallback [`1566f2c`](https://github.com/karmaniverous/stan-cli/commit/1566f2c5af4ca06d31a165843ab83b87f62dd5e5)
- feat(config): init migrates legacy → namespaced; honor legacy engine keys during transition [`6d2fc89`](https://github.com/karmaniverous/stan-cli/commit/6d2fc892b1bc92345b87e004a09eb743122b0676)
- chore: release v0.10.0 [`99e9d65`](https://github.com/karmaniverous/stan-cli/commit/99e9d658277465d54bad3eb5d3d2bc8e100e14ff)
- fix(run): always emit engine-legacy debugFallback under STAN_DEBUG=1 [`ad61c82`](https://github.com/karmaniverous/stan-cli/commit/ad61c829a5c0c8572fcd00506c245efc1b7513a2)
- feat(run): include-on-change ephemeral prompt; snap records prompt hash [`4c983ff`](https://github.com/karmaniverous/stan-cli/commit/4c983ff2636f0ced927e0ba772c11fa50e6859e0)
- test(snap): fix Windows teardown flake in stash success test [`b465402`](https://github.com/karmaniverous/stan-cli/commit/b46540226198cf53f1d70a38238c231c55ca7f8e)
- feat(cli-config): add stan-cli loader (Zod) and wire into help/patch/snap/version/snap-context [`4c54341`](https://github.com/karmaniverous/stan-cli/commit/4c5434109167e2d351daea984b49437324e2d4f4)
- refactor(run): adopt RunnerConfig (CLI scripts) and derive from CLI loader [`3b6a318`](https://github.com/karmaniverous/stan-cli/commit/3b6a3188ee96cde2d3f16b444c18d6ad75ac694a)
- refactor(run,config): emit legacy notice once; drop local DEFAULT_OPEN_COMMAND [`26f1ed5`](https://github.com/karmaniverous/stan-cli/commit/26f1ed5a36e20a2d090baf3d9838f4f38cedb81d)
- fix(init): avoid legacy root keys when namespaced; refine tests; tidy docs [`6fbb955`](https://github.com/karmaniverous/stan-cli/commit/6fbb9559f03f196548058d9b22892eb08f46d189)
- fix(init+run): non-interactive --dry-run; idempotent force on namespaced; emit engine-legacy debugFallback [`a39f02c`](https://github.com/karmaniverous/stan-cli/commit/a39f02c883ee6f77e874261d0ae41ae58d2d37cd)
- refactor: DRY archive helpers into shared module [`7a38da3`](https://github.com/karmaniverous/stan-cli/commit/7a38da371821dad2cc4a3eb52c217797333640b7)
- fix(run): honor legacy includes/excludes during archive [`c67603b`](https://github.com/karmaniverous/stan-cli/commit/c67603ba2baacfa9522e67c878ab9ce69eea5e7e)
- fix(run): suppress ephemeral prompt from diff by creating diff before injection [`f9461ce`](https://github.com/karmaniverous/stan-cli/commit/f9461ce6dfbbc3df27aa7b2e48b37adf8183037e)
- feat(run): execute scripts with repo-local PATH (node_modules/.bin precedence) [`287cbb9`](https://github.com/karmaniverous/stan-cli/commit/287cbb9c43f6357c7baeebc9e734737d8a0c8265)
- chore(docs,tests): PATH note; fix Typedoc warning [`c41d2cf`](https://github.com/karmaniverous/stan-cli/commit/c41d2cf6e1fb283e09ee6ddc6a6841f8270aaa7a)
- refactor: normalize duplicate decompositions; move CLI bootstrap out of stan/ [`ff63ef4`](https://github.com/karmaniverous/stan-cli/commit/ff63ef460011e476706c8f92b2c31cdd69d9fe9a)
- refactor(cli): DRY command headers into shared helper [`60a6ec8`](https://github.com/karmaniverous/stan-cli/commit/60a6ec8a9e6d65c9671690c0e6b9987b4b8694ad)
- test: migrate to RunnerConfig; harden snap tests for Windows/CI timing [`2af66b2`](https://github.com/karmaniverous/stan-cli/commit/2af66b2684858be718e31720dc9f773c178c457c)
- fix(init,run): migrate legacy → namespaced and emit early engine-legacy debug [`05f77b0`](https://github.com/karmaniverous/stan-cli/commit/05f77b0f7e1e47bd5aaff7801caf954e52b7b655)
- docs: add Migration guide; wire into typedoc; link from README; update plan [`746b17e`](https://github.com/karmaniverous/stan-cli/commit/746b17ee62600332f2954960c5ab70eb67442f12)
- test(init): tighten root-level scripts regex in migration test [`f45107c`](https://github.com/karmaniverous/stan-cli/commit/f45107c906e55f06f7c283928762f74ce46b7528)
- test: finish RunnerConfig migration; harden snap tests [`7537803`](https://github.com/karmaniverous/stan-cli/commit/75378035a698e23a969c7ee47fde3f6d95c5e2f9)
- fix(cli): move CLI defaults/patchOpenCommand reads to stan-cli loader; import core in snap [`0e03ca8`](https://github.com/karmaniverous/stan-cli/commit/0e03ca83d0c4dba01d3d2b5efef0256c6b5ad9ae)
- refactor: centralize STAN workspace paths and adopt across archive code [`18afa13`](https://github.com/karmaniverous/stan-cli/commit/18afa1334c407c20d2851f04f19756823387a6e5)
- fix(init): preserve existing scripts on legacy upgrade by seeding UI defaults from migrated config [`9565331`](https://github.com/karmaniverous/stan-cli/commit/95653314078aaafabb5411cb7d2797bd4fa66538)
- fix(cli): compute plan default from stan-cli config; snap stash default from CLI; repair patch service [`5fd5b90`](https://github.com/karmaniverous/stan-cli/commit/5fd5b90ab24ef4ad9d28b847e0dbda783351e182)
- fix(init/run): skip migration prompt on --dry-run; strict no-op for --force+namespaced; early run.action legacy notice [`8f01ebf`](https://github.com/karmaniverous/stan-cli/commit/8f01ebf7eab55ae1c161d9ba93726ed9a40949c5)
- fix(run): debug-log config fallback and use ".stan" default via core helpers [`694feb5`](https://github.com/karmaniverous/stan-cli/commit/694feb564ef98671b19c926b24a574ce228586be)
- fix(cli): restore loop header and reversal guard in snap/patch [`b1d14ed`](https://github.com/karmaniverous/stan-cli/commit/b1d14edbcf90a3c8b0be179c1074275b594492c8)
- chore(tests,docs): fix header test lint/styling; export ScriptEntry for Typedoc [`9622b23`](https://github.com/karmaniverous/stan-cli/commit/9622b237d315f23cda3cadf34ce51b2073979a41)
- fix: import debugFallback and use core DEFAULT_OPEN_COMMAND [`cc0b179`](https://github.com/karmaniverous/stan-cli/commit/cc0b1790e86eae39a787250d8bdda45484963d5a)
- fix(run): ensure early legacy-engine debugFallback is emitted once [`fe50a54`](https://github.com/karmaniverous/stan-cli/commit/fe50a543270acb0c07d5bf6f77d646ef2665c720)
- updated dependencies [`b7cd94b`](https://github.com/karmaniverous/stan-cli/commit/b7cd94bb5fa23174e0704a14a1b8bea73fc53dc9)
- docs: note plan ‘prompt:’ line; add init migration/.bak/--dry-run; update plan [`297cd75`](https://github.com/karmaniverous/stan-cli/commit/297cd75a3334e8847d9798e39dca2b0949a2fda6)
- docs(todo): capture handoff tasks; normalize Next up to bullets [`058cd2d`](https://github.com/karmaniverous/stan-cli/commit/058cd2ddef5d3b968b6964924a5657d69791efa0)
- fix(tests): align snap tests with namespaced config (stan-core/stan-cli) [`6ea474f`](https://github.com/karmaniverous/stan-cli/commit/6ea474f505ead1337d8fdacd0decefd7e48573fd)
- fix(lint): resolve TSDoc and unused code issues [`fc0f2f3`](https://github.com/karmaniverous/stan-cli/commit/fc0f2f3524e7906c4b34579e4054bee02b9ab6b8)
- chore: adopt directory+index barrel convention; regularize exec module [`c155512`](https://github.com/karmaniverous/stan-cli/commit/c155512720006ca09eb2abf74d350d101f8336fe)
- docs(run): document prompt source flag and diff suppression behavior [`26a8a6c`](https://github.com/karmaniverous/stan-cli/commit/26a8a6ccbf612895842fd53c8b1f38a5d649ff4a)
- refactor(dry): remove redundant barrels; realign exports/imports [`bae675a`](https://github.com/karmaniverous/stan-cli/commit/bae675a62f619d2c12bef4c9af7924fc8ea8c205)
- test: ensure legacy engine notice appears during CLI legacy fallback [`3208220`](https://github.com/karmaniverous/stan-cli/commit/3208220d2e4520d8b77c55c48d6a2c41bf9f9aeb)
- fix(lint): remove unnecessary await in session prompt resolution [`ee6e2c8`](https://github.com/karmaniverous/stan-cli/commit/ee6e2c8d9b8def513508730dc24ac0c51bf88bba)
- refactor(version): use shared docs-meta reader [`5e7298b`](https://github.com/karmaniverous/stan-cli/commit/5e7298b94dc235ab7e8eead15073e32cdeb6780a)
- installed zod [`27c495b`](https://github.com/karmaniverous/stan-cli/commit/27c495b80364d6af31a674da38cc10cbcd0a1008)
- test(core): make TTY detection dynamic to fix styled header test [`4d342bb`](https://github.com/karmaniverous/stan-cli/commit/4d342bb87d968f4e22bdf69a03a5548bd7f84148)
- fix: import debugFallback and use core DEFAULT_OPEN_COMMAND [`0005ca3`](https://github.com/karmaniverous/stan-cli/commit/0005ca340b95f4c1d4af97011aa4019704e33625)
- updated stan-code [`d8d2573`](https://github.com/karmaniverous/stan-cli/commit/d8d2573ec5ac5830f6e3b747c5a4868c12028164)
- updated stan [`99c1f3b`](https://github.com/karmaniverous/stan-cli/commit/99c1f3bd095e07b661f4dcd7cc18e6d2fb53fbf9)

#### [0.9.0](https://github.com/karmaniverous/stan-cli/compare/0.8.0...0.9.0)

> 10 October 2025

- feat(cli): dim “(Y/n)” in loop reversal prompt and DRY confirmation logic [`af2f3af`](https://github.com/karmaniverous/stan-cli/commit/af2f3af814b010b81c879c5f664c00d11ad3ca61)
- refactor(patch): decompose service; enforce FO-only and single-file diff [`8914d96`](https://github.com/karmaniverous/stan-cli/commit/8914d965e2a913e4ac7580280f0d3d8b1e24acdc)
- refactor: decompose UI/renderer/session; fix final-frame policy [`704bec7`](https://github.com/karmaniverous/stan-cli/commit/704bec7b0c14f2c28d341d182ce8ca7d19dbb189)
- fix(live): keep hint after first frame; attach keys before render; fix ANSI probe; serialize final frame [`3ee0b22`](https://github.com/karmaniverous/stan-cli/commit/3ee0b2289ddf2effb1d50817606ac7d9c56aa458)
- feat(logger): replace log-update with AnchoredWriter (no alt-screen); keep table anchored; hide hint on completion [`1ba936e`](https://github.com/karmaniverous/stan-cli/commit/1ba936e3cbeadf7758ba5c3f722068dd9e4d9bfb)
- fix(patch): classify File Ops–only patches correctly; add regression test [`f258e2e`](https://github.com/karmaniverous/stan-cli/commit/f258e2e9fc9c23da20fdaf3dded996723eb8ef1d)
- deleted bs tests [`58f049b`](https://github.com/karmaniverous/stan-cli/commit/58f049bdf73baa70d5e407b173e0d497cbab431d)
- refactor(live): decompose renderer; move frame composition to frame.ts; keep renderer lean [`e8223b0`](https://github.com/karmaniverous/stan-cli/commit/e8223b0945c76489b5f011ac9d24054a65250352)
- feat(live): switch to FullClearWriter; remove log-update dependency; stabilize Windows/VS Code footer [`7af38ad`](https://github.com/karmaniverous/stan-cli/commit/7af38ad0908cd2aa9c04c915d0cc6bb4da047f61)
- refactor: further decompose session/renderer; fix lint [`37adb86`](https://github.com/karmaniverous/stan-cli/commit/37adb868e591c3a4923db7cdb66a2be2453348d1)
- feat(loop): add loop header + reversal guard; global -y/--yes [`77891d3`](https://github.com/karmaniverous/stan-cli/commit/77891d3d957596471d1c041091bbb38c44bc678f)
- chore: release v0.9.0 [`6977ae1`](https://github.com/karmaniverous/stan-cli/commit/6977ae147fe29e096d6f99e4e37b05f91b8e93e3)
- fix(live): add trailing newline to frames and assert footer persistence [`430fb15`](https://github.com/karmaniverous/stan-cli/commit/430fb15260aee61ef0d592e17fefe28586166909)
- refactor: extract live tracing to shared module [`3346b73`](https://github.com/karmaniverous/stan-cli/commit/3346b734e501cd52f462eb02f1cedae4f94bba18)
- patch: keep patch logs contiguous, print trailing blank once; DRY patch service [`f065382`](https://github.com/karmaniverous/stan-cli/commit/f06538210d15ce7c027592c69e32eb2b65b1770c)
- test(run): add live restart behavior test (instructions persist, single header-only flush, no clear) [`3e13bb6`](https://github.com/karmaniverous/stan-cli/commit/3e13bb6b0776963bb7ad1a755e0719386cbda837)
- test(live): add failing guard against ghost [FAIL] after restart; no stale end-state before new session starts [`a455dc5`](https://github.com/karmaniverous/stan-cli/commit/a455dc5e52692055b9e2c8816d1a1446e92af870)
- updated stan-core [`3073fd4`](https://github.com/karmaniverous/stan-cli/commit/3073fd4cd84bd1fa8f34d3b4b0f47aeae437624a)
- refactor(dry): unify UI types and BORING detection; remove duplicates [`102b64e`](https://github.com/karmaniverous/stan-cli/commit/102b64e89b416286476c7e58f9100000d3c8bebc)
- feat(patch): open modified files after successful apply [`86b8313`](https://github.com/karmaniverous/stan-cli/commit/86b831394fcf99779622f2170941c810809ab151)
- refactor(dry): centralize path/meta/counts helpers; adopt across UI/progress [`757ca12`](https://github.com/karmaniverous/stan-cli/commit/757ca12a549b2d4675dcd0dbcc8c7a04ed95ad59)
- fix(live): restart bridge drops stale rows; persist full table on completion [`abcddd6`](https://github.com/karmaniverous/stan-cli/commit/abcddd60b824d15e50a758e02753f54c00326de0)
- fix(live): restart shows CANCELLED immediately, no empty gap; flush new session rows [`2579cf9`](https://github.com/karmaniverous/stan-cli/commit/2579cf92096d5d75e5e209931a94809c254aeeb5)
- fix(live): left-align Time/Output headers; normalize trailing spacing; align tests [`7f5650e`](https://github.com/karmaniverous/stan-cli/commit/7f5650e8ceba2506c3d7e4f5413284d4fe610621)
- feat(patch): copy diagnostics to clipboard; add file line; open target on failure; fix table config [`ec6a168`](https://github.com/karmaniverous/stan-cli/commit/ec6a168587b5235998ecc7a3d6c2c9ae3b045d19)
- fix(live): left-align table headers to column content [`4fbfa94`](https://github.com/karmaniverous/stan-cli/commit/4fbfa942cac3027a3305e3f2bac12fea08776d2e)
- live: ANSI‑safe frame debug + lifecycle tracing (opt‑in) [`e3c1272`](https://github.com/karmaniverous/stan-cli/commit/e3c127290ea5efb596a83ee78cb1c2cf836c3de4)
- test(live): tighten ghost-fail restart test to fail when stale [FAIL] renders before first [WAIT]/[RUN] in new session [`d99b1a7`](https://github.com/karmaniverous/stan-cli/commit/d99b1a765edeed7ff21539198aac77d55543cf2c)
- live: add opt-in trace logs for renderer/sink (STAN_LIVE_DEBUG) [`6195ef3`](https://github.com/karmaniverous/stan-cli/commit/6195ef3e5e7cf29098a037402d14295ed0db3ca2)
- fix(live): keep table header visible between restarts [`abd383d`](https://github.com/karmaniverous/stan-cli/commit/abd383dbe4c258fd2b4218d6195b0f9ef71312db)
- fix: live restart guards; stabilize behavior test [`ed7bcf6`](https://github.com/karmaniverous/stan-cli/commit/ed7bcf6cfb5af2bd663ac62bcc19e895f711312f)
- refactor(cli): always use core dist system prompt [`250f63c`](https://github.com/karmaniverous/stan-cli/commit/250f63c5b0d50765815a3fcde630f9ebc1336a5c)
- chore(live): unify footer — render summary + hint together in header-only frames [`0ac5311`](https://github.com/karmaniverous/stan-cli/commit/0ac5311f6a755acb000894c430fca5f6e65b2684)
- test: normalize trailing-clears regex and relax restart assertions (fast terminals) [`760d495`](https://github.com/karmaniverous/stan-cli/commit/760d495d849715dd9a50a11a11486013e50ba475)
- test(run): harden live restart test (wait for [RUN], retry rm on Windows) [`0eb473b`](https://github.com/karmaniverous/stan-cli/commit/0eb473bbf7b870ef8d76489d5949ab5509c9462d)
- feat(cli): richer patch output and live table spacing [`a6aef20`](https://github.com/karmaniverous/stan-cli/commit/a6aef20b57243c94543636afb94410a1cc89c5ed)
- chore(snap): add trailing blank line after output in all paths [`b537f88`](https://github.com/karmaniverous/stan-cli/commit/b537f884fde77ae719e34ea31d64b464f459cfef)
- fix(run/live): reuse single UI across restarts; keep hint visible (no duplicate table) [`b7c0cef`](https://github.com/karmaniverous/stan-cli/commit/b7c0cef478acd7a50b0a29d6c89a0d54913f4648)
- test: robust terminal newline and restart progress checks; fix ups ordering [`b5f36bf`](https://github.com/karmaniverous/stan-cli/commit/b5f36bf0f62a1880abaa8a41f9b69cc3ae584600)
- test(run): bracket header-only flush between restart marker and first post-restart row [`b677dae`](https://github.com/karmaniverous/stan-cli/commit/b677dae8c489790cf0a414b5fd3adb7c9ce7d8e4)
- fix(run/live): align headers, print WARN output path, and trim trailing blanks; flush CANCELLED on restart [`c427932`](https://github.com/karmaniverous/stan-cli/commit/c4279327f687a1de06978ad1335b6b0bd1170d4b)
- fix(live): reuse same table on restart and cleanly detach handlers [`3cef1f3`](https://github.com/karmaniverous/stan-cli/commit/3cef1f37aa4bb02e2447b0e377918ed23e34119a)
- test(run): add expected-failing guard for live restart (single UI tag, persistent hint) [`c5ca34e`](https://github.com/karmaniverous/stan-cli/commit/c5ca34e4294a1626115e0c73425f10556d6b924b)
- fix(live): drop model and renderer rows at new-session boundary; no stale statuses; hint persists [`f27d634`](https://github.com/karmaniverous/stan-cli/commit/f27d634ae09cc6dc630fec99b9e78d8039361087)
- fix: reuse LiveUI across restarts; header-only bridge [`493b0c2`](https://github.com/karmaniverous/stan-cli/commit/493b0c2f75a97a762587c248332e253cb6e6fb6b)
- test: relax live restart/footer assertions to match correct runtime behavior [`4069baf`](https://github.com/karmaniverous/stan-cli/commit/4069baf109e7d41c97f66e6b9a49d711e79841fd)
- fix(live): deterministic header-only bridge on restart to keep hint visible [`ba0969b`](https://github.com/karmaniverous/stan-cli/commit/ba0969b2cffeb6ae86b9343709b2f3e598e9e2ac)
- decolorized stan build script [`cb89274`](https://github.com/karmaniverous/stan-cli/commit/cb892741d60df3ad9a11d2867062e0d69a147607)
- fix(patch): type/lint follow‑through after decomposition [`5ef57a7`](https://github.com/karmaniverous/stan-cli/commit/5ef57a7e3d18f17745c7ed9b00aac6f8920d4eec)
- fix(live): guarantee final-frame header + hint [`df925ef`](https://github.com/karmaniverous/stan-cli/commit/df925ef990cef2ba53e050287e989bfcc1267e6f)
- feat(run): make LiveUI/LiveSink.stop() idempotent to avoid duplicate final frames [`eac7810`](https://github.com/karmaniverous/stan-cli/commit/eac7810ba6f98b3041126fd59c774a9e0b8ceae4)
- test(run): scope live restart assertions to unique row; keep bounded wait [`24e424c`](https://github.com/karmaniverous/stan-cli/commit/24e424c3cba3c8b14f216fe6463eed3505d8b567)
- fix(run/live): two-space columns; exact header alignment; single final newline (no extra CLI newline) [`094727d`](https://github.com/karmaniverous/stan-cli/commit/094727d0374fad5cb3e90dd5a1176344e3816286)
- fix(live): hard-clear once before second paint to keep hint visible [`c7333c8`](https://github.com/karmaniverous/stan-cli/commit/c7333c872be91e32c8c9d98d990904bbd6c4da8d)
- fix(ui/logger): use relOut() in onArchiveEnd; remove leftover relative() [`4b7ac9c`](https://github.com/karmaniverous/stan-cli/commit/4b7ac9c4c1405bc6af39dd9da3b45ad2ba21ca13)
- fix(live): revert header-only final frame; keep restart bridge only [`1f3bf42`](https://github.com/karmaniverous/stan-cli/commit/1f3bf423113eff2f95dbd43d89df4c1772b7b607)
- test(run): scope live restart assertions to unique row; keep bounded wait [`ffa000e`](https://github.com/karmaniverous/stan-cli/commit/ffa000e7340ff64469522ff57fb54020c3c43ac2)
- fix(live): stop frame walk; ensure final newline [`f74fba5`](https://github.com/karmaniverous/stan-cli/commit/f74fba59d1a0be9ea633a4ef33f8cb7889e5c593)
- live: keep full table as final frame; header-only only on restart [`4a9acbe`](https://github.com/karmaniverous/stan-cli/commit/4a9acbefbdeaeae804f6737cfd629d891d5341c5)
- test(live): make final frame include header deterministically [`4f1faa4`](https://github.com/karmaniverous/stan-cli/commit/4f1faa404992b2286e25358ed77a47121046a0fa)
- live: include hint in final header-only frame [`e8859df`](https://github.com/karmaniverous/stan-cli/commit/e8859df034ceee15b4e45ea000449d5a9caf80bb)
- live: persist header-only final frame; docs note [`7a3d0a0`](https://github.com/karmaniverous/stan-cli/commit/7a3d0a05ca84a8254e3efef0a4684969644eae93)
- fix(live): stop frame from walking down each tick [`0c9b24d`](https://github.com/karmaniverous/stan-cli/commit/0c9b24d19b19a8e8e1515fe14d1d1e16f756f0d9)
- knip ignore cross-env [`3a1eec6`](https://github.com/karmaniverous/stan-cli/commit/3a1eec6070e7db096dfbd487580e5e7930c6440e)
- removed stan-core local alias [`f5c31d0`](https://github.com/karmaniverous/stan-cli/commit/f5c31d06b7676af754b383e73472aff78bd991b4)
- added build warnings [`93d3699`](https://github.com/karmaniverous/stan-cli/commit/93d369916991d4c92152e8528521b6ef7b49d124)

#### 0.8.0

> 7 October 2025

- Initial commit [`0aa40fe`](https://github.com/karmaniverous/stan-cli/commit/0aa40fe3218522b81a573b209c19e508ecaa2af2)
- chore(cli): remove core engine duplicates from repo [`0306a22`](https://github.com/karmaniverous/stan-cli/commit/0306a22a719718996bd3e7634805527866fbb4fe)
- Changed package name & created interop config [`cdfd13b`](https://github.com/karmaniverous/stan-cli/commit/cdfd13bb0368f0bbabe50ae7801205f607b8e52b)
- chore: release v0.8.0 [`a843c95`](https://github.com/karmaniverous/stan-cli/commit/a843c95778db14ec5b3083ea7f203362358cf57c)
- docs(cli): sync CLI requirements with stan-core import; prune core track [`bcfa432`](https://github.com/karmaniverous/stan-cli/commit/bcfa4323d04c0466295a497b3165bae6ce3bfea1)
- installed stan-core [`4897679`](https://github.com/karmaniverous/stan-cli/commit/4897679a3b2c0b19dc3fd73d5e104949325dd0d0)
- fix: lint + test parity; robust WARN detection; tar mock alias [`19294a3`](https://github.com/karmaniverous/stan-cli/commit/19294a3fc481422b553df7558d34894456f44c34)
- chore(cli): rewire core imports to @karmaniverous/stan-core (no subpaths); add core interop [`1dbc325`](https://github.com/karmaniverous/stan-cli/commit/1dbc325e32f34d9cf1e8601ffb6e0f7fbe04162d)
- chore: fix tar capture, WARN parity, docs warning, and cleanup [`437fe16`](https://github.com/karmaniverous/stan-cli/commit/437fe16036c326ca0f2b94e13e71b0be755ebe47)
- fix(patch): colorize status in TTY and copy diagnostics on failure [`e1e18b2`](https://github.com/karmaniverous/stan-cli/commit/e1e18b2d7c4f622f478d5857c7f347f68a4c18c5)
- chore(cli): rewire to top‑level stan‑core, add patch service, fix build/tests [`cf55cac`](https://github.com/karmaniverous/stan-cli/commit/cf55cac07f430a43376ad265035d3aa4bfd0ab65)
- chore(test): centralize tar call capture; fix WARN detection fallback [`8b78f78`](https://github.com/karmaniverous/stan-cli/commit/8b78f785dee16dab1d4d61bd95aa679530ca569c)
- updated dependencies [`c79190e`](https://github.com/karmaniverous/stan-cli/commit/c79190e3c6c58c259829e180b85ec8e4c866743c)
- test: stabilize archive/diff assertions (no tar-call capture) [`8d56c39`](https://github.com/karmaniverous/stan-cli/commit/8d56c39c0faa9aa71b2be2aafad954fa3d435045)
- chore(cli): rewire core imports to @karmaniverous/stan-core (no subpaths); add core interop [`ef2b0e9`](https://github.com/karmaniverous/stan-cli/commit/ef2b0e92f6f2500a9f394afdee4fbeeaf7e56fca)
- test: fix combine and selection-sync tests (mkdir, tar mock) [`95b46f5`](https://github.com/karmaniverous/stan-cli/commit/95b46f5b58946427e4735ee791f3212579aff807)
- test: capture tar calls reliably; fix TS duplicate import [`649c11b`](https://github.com/karmaniverous/stan-cli/commit/649c11b27ca3d9a11e87f75eb8af660cd70d4176)
- installed zod docs plugin [`4afe5ec`](https://github.com/karmaniverous/stan-cli/commit/4afe5eca48cafaf6d0456a11b291c72e0ccf8524)
- fix(run): absorb late SIGINT before next sequential spawn [`553f25b`](https://github.com/karmaniverous/stan-cli/commit/553f25bbecd2dd6530a48553b319d0b4b7732a94)
- chore(types): map @karmaniverous/stan-core to staged declarations for tsc [`13307b9`](https://github.com/karmaniverous/stan-cli/commit/13307b971491ed15ef9273f1dffecb989b3e1bac)
- fix(tests): make tar mocking effective and harden WARN detection [`c1b94a1`](https://github.com/karmaniverous/stan-cli/commit/c1b94a10f37335157f791497f67a1648fad3bb9c)
